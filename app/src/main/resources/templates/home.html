<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" th:href="@{/css/styles.css}" />
    <link rel="icon" href="icon.png" type="image/png" />
    <title>To Do</title>
  </head>

  <body>

    <form th:action="@{/insertNewTask}" method="post" class="add-item-form">
      <input type="text" name="pName" required placeholder="Enter new task..."></input> 
      <button type="submit">Add</button>
    </form>

    <div class="side-bar-wrapper">
      <div class="side-bar">
        <form th:action="@{/clearCompletedTasks}" method="post">
          <button type="submit" title="clear completed tasks">üÜë</button>
        </form>


        <form th:action="@{/displayAllTasks}" method="get">
          <button type="submit">Display all tasks</button>
        </form>

        <form th:action="@{/taskWithCompletionStatus}" method="get">
          <input type="hidden" name="pIsCompleted" th:value="${true}"></input>
          <button type="submit">Display Completed Tasks</button>
        </form>


        <form th:action="@{/taskWithCompletionStatus}" method="get">
          <input type="hidden" name="pIsCompleted" th:value="${false}"></input>
          <button type="submit">Display Undone Tasks</button>
        </form>
      </div>
    </div>


    <p class="empty-message" th:if="${#lists.isEmpty(toDoListItems)}">Everything's done. Yay! ‚ú®</p>


    <!-- use the thymeleaf * selection operator so we don't have to specify the (name).property -->
    <!-- instead of ${name.id}, write *{id}. however, it must be referring to a parent defined in th:object="${object}" -->

    <div th:each="item: ${toDoListItems}" th:object="${item}" class="item-card-list">
      <div class="item-card-row">
        <h3 th:text="*{name + (isCompleted ? ' ‚úÖ' : ' ‚ùå')}" class="item-card">Task Name</h3>

        <aside class="user-actions">
          <form th:action="@{/toggleCompletionStatus}" method="post" class="user-toggle-status">
            <input type="hidden" name="pId" th:value="*{id}"></input>
            <button type="submit" title="toggle completion status">‚≠ï</button>
          </form>

          <form th:action="@{/deleteTask}" method="post" class="user-delete">
            <input type="hidden" name="pId" th:value="*{id}"></input>
            <button type="submit" title="delete this task"> Ôá∏  </button>
          </form>

          <form th:action="@{/updateTask}" method="post" class="user-update-taskname">
            <input type="hidden" name="pId" th:value="*{id}"></input>
            <input type="text" name="pName" th:value="*{name}" th:placeholder="*{name}"></input>
            <input type="hidden" name="pStatus" th:value="*{isCompleted}"></input>
            <button type="submit" title="edit task name">‚úèÔ∏è</button>
          </form>
        </aside>

      </div>
    </div>

  </body>
</html>


